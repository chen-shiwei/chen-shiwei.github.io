---
title: "互联网架构设计经验"
date: "2020-12-03"
tag: ["Arch"]
categories: ["Arch"]
draft: true
---
# 互联网架构设计经验

[https://juejin.im/entry/56d648fba633bd00565b605f](https://juejin.im/entry/56d648fba633bd00565b605f)

## 质量指标

- 功能
  基本要求，既定的业务逻辑
- 性能
  - 单次请求的相应时间 qps
  - 单实例请求并发数
  - 服务最大并发量
- 扩展性
  - 提出需求 快速响应 尽快上线

## 设计过程

- 确定作用域
  - 模拟问题
  - 延伸问题
  - 遵循原则
    - 单一职责原则
    - 依赖倒置原则
    - 开闭原则
    - 里氏替换原则
    - 接口隔离原则
  - 参考友商或者与有经验的产品运营沟通，大致了解存在的扩展性
- 数据建模
  - 必须字段
    - created_at
    - updated_at
    - 自增 id
    - verison 版本号（方便的乐观锁）
  - 不使用外键
    - 外键约束带来的数据完整性的优势远远小于更新逻辑实现的难度
  - 使用 id 作为表关联
    - uuid
    - 这个字段用户可能感知
  - 表有没有多少列的标准？
  - 冗余字段是否有必要？
    - 我的做法是不使用，保持原有的设计，如果系统真的流量比较大，查询性能太低，可以通过把读服务从业务系统中分离(这里要注意不是数据库的读写分离)
- 模块划分
  - 单体架构
  - 微服务架构 分布式机构
- 关键流程描述
  - 检查系统架构是否满足需求和指导开发的必要条件
  ```
  1、有始有终，流程应该是从用户进入应用开始到离开应用的完整过程，比如交易的过程，应该从用户开始浏览商品到用户支付成功这一个过程。

  2、流程图突出重点，比如上面举例的交易过程，应该突出交易相关的流程判断，不必描述用户注册，找回密码等过程。

  3、简要说明，避免过于详细，比如交易的过程中需要更新库存，但是不需要描述更新库存前的库存校验这些是提交订单的内部实现。
  ```
  ![image](https://user-gold-cdn.xitu.io/2016/11/29/e6efc0af5a1d63e946d4246d64bfce77.jpg?imageslim)
- 技术选型
  - 使用常用的技术，框架
- 代码实现
  - ...
- 验收测试
  - ...
